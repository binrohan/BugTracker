<div class="whole">
  <mat-accordion class="example-headers-align">
  <mat-expansion-panel [expanded]="step === 0" (opened)="setStep(0)" hideToggle>
    <mat-expansion-panel-header>
      <mat-panel-title>
        INFORMATION
      </mat-panel-title>
      <mat-panel-description>
        Basic Information of The Project
        <mat-icon>assignment</mat-icon>
      </mat-panel-description>
    </mat-expansion-panel-header>

    <app-project-basic></app-project-basic>

    <mat-action-row>
      <button *appHasRole="['Admin']" mat-button color="primary" [routerLink]="['/projects/0']">List of projects</button>
      <button [disabled]='isProjectArchived' *appHasRole="['Admin']" mat-button color="warn" (click)="archiveProject()">Archived</button>
      <button *appHasRole="['Admin']" mat-button color="accent" [routerLink]="['/project/edit/', projectId]">Edit</button>
      <button mat-button color="primary" (click)="nextStep()">Next</button>
    </mat-action-row>
  </mat-expansion-panel>

  <mat-expansion-panel [expanded]="step === 1" (opened)="setStep(1);  loadUsers()" hideToggle>
    <mat-expansion-panel-header>
      <mat-panel-title>
        PERSONNEL
      </mat-panel-title>
      <mat-panel-description>
        List of Personnel Assigned in this Project
        <mat-icon>supervised_user_circle</mat-icon>
      </mat-panel-description>
    </mat-expansion-panel-header>

    <app-project-users></app-project-users>

    <mat-action-row>
      <button *appHasRole="['Admin', 'Manager']" mat-button color="accent" (click)="addPersonnel()">Add person</button>
      <button *appHasRole="['Admin']" mat-button color="primary" [routerLink]="['/users']">Go to User Management</button>
      <button mat-button color="warn" (click)="prevStep()">Previous</button>
      <button mat-button color="primary" (click)="nextStep()">Next</button>
    </mat-action-row>
  </mat-expansion-panel>

  <mat-expansion-panel *appHasRole="['Admin', 'Manager']" [expanded]="step === 2" (click)="loadFreeUsers()" (opened)="setStep(2)" hideToggle>
    <mat-expansion-panel-header>
      <mat-panel-title>
        ADD PERSON
      </mat-panel-title>
      <mat-panel-description>
        List of Personnel Assigned in this Project
        <mat-icon>add</mat-icon>
      </mat-panel-description>
    </mat-expansion-panel-header>

    <app-free-users></app-free-users>

    <mat-action-row>
      <button *appHasRole="['Admin', 'Manager']" mat-button color="primary" (click)="assignUsers()">Add Users</button>
      <button *appHasRole="['Admin']" mat-button color="accent" [routerLink]="['/users']">Go to User Management</button>
      <button mat-button color="warn" (click)="prevStep()">Previous</button>
      <button mat-button color="primary" (click)="nextStep()">Next</button>
    </mat-action-row>
  </mat-expansion-panel>

  <mat-expansion-panel [expanded]="step === 3" (click)="loadTickets()" (opened)="setStep(3)" hideToggle>
    <mat-expansion-panel-header>
      <mat-panel-title>
        TICKETS
      </mat-panel-title>
      <mat-panel-description>
        List of Active Tickets 
        <mat-icon>assignment_late</mat-icon>
      </mat-panel-description>
    </mat-expansion-panel-header>

    <app-project-tickets></app-project-tickets>

    <mat-action-row>
      <button *appHasRole="['Admin']" mat-button color="primary" [routerLink]="['/tickets/1']">Create new ticket</button>
      <button *appHasRole="['Admin']" mat-button color="primary" [routerLink]="['/tickets/0']">List of tickets</button>
      <button mat-button color="warn" (click)="prevStep()">Previous</button>
      <button mat-button color="primary" (click)="nextStep()">Next</button>
    </mat-action-row>
  </mat-expansion-panel>

  <mat-expansion-panel *appHasRole="['Admin', 'Manager']" [expanded]="step === 4" (opened)="setStep(4)" hideToggle>
    <mat-expansion-panel-header>
      <mat-panel-title>
        CREATE NEW TICKET
      </mat-panel-title>
      <mat-panel-description>
        Create new tickets for this project
        <mat-icon>create</mat-icon>
      </mat-panel-description>
    </mat-expansion-panel-header>

    <app-ticket-form [projectIdFromParent]="projectId"></app-ticket-form>

    <mat-action-row>
      <button mat-button color="warn" (click)="prevStep()">Previous</button>
      <button mat-button color="primary" (click)="nextStep()">End</button>
    </mat-action-row>
  </mat-expansion-panel>

  <mat-expansion-panel [expanded]="step === 5" (opened)="setStep(5)" hideToggle>
    <mat-expansion-panel-header>
      <mat-panel-title>
        RESOLVED TICKETS
      </mat-panel-title>
      <mat-panel-description>
        List of resolved and approved Tickets of The Project
        <mat-icon>assignment_turned_in</mat-icon>
      </mat-panel-description>
    </mat-expansion-panel-header>

    <app-project-archived-tickets [projectId]="projectId" ></app-project-archived-tickets>

    <mat-action-row>
      <button *appHasRole="['Admin', 'Manager']" mat-button color="primary" [routerLink]="['/tickets/2']">List of archived tickets</button>
      <button mat-button color="warn" (click)="prevStep()">Previous</button>
      <button mat-button color="primary" (click)="nextStep()">End</button>
    </mat-action-row>
  </mat-expansion-panel>

</mat-accordion>
</div>


